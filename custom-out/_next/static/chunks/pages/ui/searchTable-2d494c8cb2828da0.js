(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[152],{854:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/ui/searchTable",function(){return n(8530)}])},8530:function(e,t,n){"use strict";n.r(t);var r=n(8520),a=n.n(r),s=n(5893),o=n(2850),c=n(7294),i=n(5773),l=n(5305),u=n(9886),d=n(9816),m=n(4610),p=n(1442),h=n(9163),x=n(3126),f=n(7261),v=n(4082);function j(e,t,n,r,a,s,o){try{var c=e[s](o),i=c.value}catch(l){return void n(l)}c.done?t(i):Promise.resolve(i).then(r,a)}function w(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var s=e.apply(t,n);function o(e){j(s,r,a,o,c,"next",e)}function c(e){j(s,r,a,o,c,"throw",e)}o(void 0)}))}}function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){N(e,t,n[t])}))}return e}t.default=function(){var e=(0,c.useState)(""),t=e[0],n=e[1],r=(0,c.useState)([]),j=r[0],S=r[1],k=(0,c.useState)({Organizations:"",ContactName:"",Designation:"",department:"",currentlyInBussiness:"",Sector:"",Industry:"",ProductNames:""}),C=k[0],g=k[1],y=(0,c.useState)([]),P=(y[0],y[1],(0,c.useState)(!0)),O=(P[0],P[1]),Z=(0,c.useState)([]),T=Z[0],I=Z[1],D=(0,c.useState)([]),E=D[0],L=D[1],_=(0,c.useState)([]),A=_[0],B=_[1],F=(0,c.useState)(""),q=F[0],z=F[1],G=(0,c.useState)(""),H=G[0],M=G[1],R=(0,c.useState)(""),U=R[0],X=R[1],J=(0,c.useState)(""),V=(J[0],J[1],(0,c.useState)([])),W=(V[0],V[1]),Y=(0,c.useState)(""),K=Y[0],Q=Y[1],$=(0,c.useState)([]),ee=($[0],$[1]),te=(0,c.useState)(""),ne=te[0],re=te[1],ae=(0,c.useState)(""),se=ae[0],oe=ae[1],ce=(0,c.useState)([]),ie=(ce[0],ce[1]),le=w(a().mark((function e(){var t,n,r,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://eimsdemo.mannaicorp.com.qa/otcs/cs.exe/api/v1/auth",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({username:"admin",password:"P@ssw0rd"})});case 3:if(!(t=e.sent).ok){e.next=22;break}return e.next=7,t.json();case 7:return n=e.sent,e.next=10,fetch("http://eimsdemo.mannaicorp.com.qa/otcs/cs.exe/api/v1/webreports/1676247?Format=webreport",{method:"GET",headers:{OTCSTicket:n.ticket}});case 10:if(!(r=e.sent).ok){e.next=19;break}return e.next=14,r.json();case 14:s=e.sent,console.log(s),I(s),e.next=20;break;case 19:console.error("View data API failed");case 20:e.next=23;break;case 22:console.error("Authentication API failed");case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(0),console.error("API request failed:",e.t0);case 28:return e.prev=28,O(!1),e.finish(28);case 31:case"end":return e.stop()}}),e,null,[[0,25,28,31]])}))),ue=(0,c.useState)(!1),de=ue[0],me=ue[1],pe=(0,c.useState)(!1),he=pe[0],xe=pe[1],fe=(0,c.useState)(!1),ve=fe[0],je=fe[1],we=function(){me(!de)},Ne=T.filter((function(e){return e.OrgName.toLowerCase().includes(q.toLowerCase())})),be=function(){xe(!he)},Se=E.filter((function(e){return e.ContactName.toLowerCase().includes(H.toLowerCase())})),ke=function(){je(!ve)},Ce=A.filter((function(e){return e.Department.toLowerCase().includes(U.toLowerCase())})),ge="",ye=w(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://eimsdemo.mannaicorp.com.qa/otcs/cs.exe/api/v1/auth",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({username:"admin",password:"P@ssw0rd"})});case 3:if(!(t=e.sent).ok){e.next=12;break}return e.next=7,t.json();case 7:ge=e.sent,console.log(JSON.stringify(ge.ticket)),console.log("Authentication successful",ge),e.next=13;break;case 12:console.error("Authentication failed");case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.error("Error occurred while authenticating:",e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));(0,c.useEffect)((function(){w(a().mark((function e(){var t,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ye();case 3:return e.next=5,fetch("http://eimsdemo.mannaicorp.com.qa/otcs/cs.exe/api/v1/webreports/1676720?Format=webreport&selectedOrganization=".concat(K),{method:"GET",headers:{OTCSTicket:ge.ticket}});case 5:if(!(t=e.sent).ok){e.next=15;break}return console.log(t),e.next=10,t.json();case 10:n=e.sent,console.log(n),L(n),e.next=16;break;case 15:console.error("Contact Dropdown api failed");case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),console.error("Contact Dropdown api failed",e.t0);case 21:case"end":return e.stop()}}),e,null,[[0,18]])})))()}),[K]);var Pe=w(a().mark((function e(){var t,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ye();case 3:return e.next=5,fetch("http://eimsdemo.mannaicorp.com.qa/otcs/cs.exe/api/v1/webreports/1676281?Format=webreport",{method:"GET",headers:{OTCSTicket:ge.ticket}});case 5:if(!(t=e.sent).ok){e.next=15;break}return console.log(t),e.next=10,t.json();case 10:n=e.sent,console.log(n),B(n),e.next=16;break;case 15:console.error("Product api failed");case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),console.error("Product api failed:",e.t0);case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));(0,c.useEffect)((function(){w(a().mark((function e(){var t,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ye();case 3:return"webreport",e.next=6,fetch("http://eimsdemo.mannaicorp.com.qa/otcs/cs.exe/api/v1/webreports/965676?Format=".concat("webreport"),{method:"GET",headers:{OTCSTicket:ge.ticket}});case 6:if(!(t=e.sent).ok){e.next=16;break}return console.log(t),e.next=11,t.json();case 11:n=e.sent,console.log(n),S(n),e.next=17;break;case 16:console.error("Product api failed");case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),console.error("Product api failed:",e.t0);case 22:case"end":return e.stop()}}),e,null,[[0,19]])})))()}),[]),(0,c.useEffect)((function(){le(),Pe()}),[]);var Oe=function(e){var t=e.target,n=t.name,r=t.value;g((function(e){return b({},e,N({},n,r))}))};return(0,s.jsxs)(i.Z,{children:[(0,s.jsxs)(i.Z,{children:[(0,s.jsxs)("div",{className:"displayflex",children:[(0,s.jsx)("h5",{className:"col-md-9",children:"Search"}),(0,s.jsxs)("div",{className:"col-md-3 titlegrp2",children:[" ",(0,s.jsx)("i",{className:"bi bi-search searchicontitle"}),(0,s.jsx)("input",{name:"text",placeholder:"Search",className:"form-control",style:{marginBottom:"20px"},value:t,onChange:function(e){return n(e.target.value)}})]})]}),(0,s.jsx)(l.Z,{children:(0,s.jsxs)(u.Z,{children:[(0,s.jsxs)(d.Z,{tag:"h6",className:"border-bottom p-3 mb-0",children:[(0,s.jsx)("i",{className:"bi bi-person me-2",children:" "}),"Search Details"]}),(0,s.jsx)(m.Z,{children:(0,s.jsxs)(p.Z,{className:"row",children:[(0,s.jsx)(h.Z,{className:"col-3",children:(0,s.jsxs)("div",{className:"custom-dropdown-container",children:[(0,s.jsx)("label",{htmlFor:"organization",className:"form-label",children:"Organization"}),(0,s.jsxs)("div",{className:"custom-dropdown",onClick:we,children:[(0,s.jsx)("div",{className:"dropdown-arrow ".concat(de?"open":"")}),(0,s.jsx)("input",{type:"text",id:"organization",placeholder:"--Select Organisation--",value:q,className:"form-select",onChange:function(e){var t=e.target.value;if(z(t),""===t)W([]),Q("");else{var n=T.filter((function(e){return e.OrgName.toLowerCase().includes(t.toLowerCase())}));W(n)}},onClick:we}),de&&(0,s.jsx)("div",{className:"dropdown-options",children:Ne.map((function(e,t){return(0,s.jsx)("div",{className:"dropdown-option",onClick:function(){return t=e.OrgName,Q(t),z(t),void me(!1);var t},children:e.OrgName},t)}))})]})]})}),(0,s.jsx)(h.Z,{className:"col-3",children:(0,s.jsxs)("div",{className:"custom-dropdown-container",children:[(0,s.jsx)("label",{htmlFor:"ContactName",className:"form-label",children:"Contact Name"}),(0,s.jsxs)("div",{className:"custom-dropdown",onClick:be,children:[(0,s.jsx)("div",{className:"dropdown-arrow ".concat(he?"open":"")}),(0,s.jsx)("input",{type:"text",id:"ContactName",placeholder:"--Select--",value:H,className:"form-select",onChange:function(e){var t=e.target.value;if(M(t),""===t)ee([]),re("");else{var n=E.filter((function(e){return e.ContactName.toLowerCase().includes(t.toLowerCase())}));ee(n)}},onClick:be}),he&&(0,s.jsx)("div",{className:"dropdown-options",children:Se.map((function(e,t){return(0,s.jsx)("div",{className:"dropdown-option",onClick:function(){return t=e.ContactName,re(t),M(t),void xe(!1);var t},children:e.ContactName},t)}))})]})]})}),(0,s.jsx)(h.Z,{className:"col-3",children:(0,s.jsxs)("div",{className:"custom-dropdown-container",children:[(0,s.jsx)("label",{htmlFor:"Department",className:"form-label",children:"Department"}),(0,s.jsxs)("div",{className:"custom-dropdown",onClick:ke,children:[(0,s.jsx)("div",{className:"dropdown-arrow ".concat(ve?"open":"")}),(0,s.jsx)("input",{type:"text",id:"Department",placeholder:"--Select--",value:U,className:"form-select",onChange:function(e){var t=e.target.value;if(X(t),""===t)ie([]),oe("");else{var n=A.filter((function(e){return e.Department.toLowerCase().includes(t.toLowerCase())}));ie(n)}},onClick:ke}),ve&&(0,s.jsx)("div",{className:"dropdown-options",children:Ce.map((function(e,t){return(0,s.jsx)("div",{className:"dropdown-option",onClick:function(){return t=e.Department,oe(t),X(t),void je(!1);var t},children:e.Department},t)}))})]})]})}),(0,s.jsxs)(h.Z,{className:"col-3",children:[(0,s.jsx)(x.Z,{for:"currentlyInBussiness",children:"Bussiness Partner"}),(0,s.jsxs)(f.Z,{id:"currentlyInBussiness",name:"currentlyInBussiness",type:"select",onChange:Oe,value:C.currentlyInBussiness,children:[(0,s.jsx)("option",{value:"",children:"--Select--"}),(0,s.jsx)("option",{value:"yes",children:"Yes"}),(0,s.jsx)("option",{value:"no",children:"No"})]})]}),(0,s.jsxs)(h.Z,{className:"col-3",children:[(0,s.jsx)(x.Z,{for:"Sector",children:"Sector"}),(0,s.jsxs)(f.Z,{id:"Sector",name:"Sector",type:"select",onChange:Oe,value:C.Sector,children:[(0,s.jsx)("option",{value:"",children:"--Select--"}),(0,s.jsx)("option",{children:"Public"}),(0,s.jsx)("option",{children:"Private"})]})]}),(0,s.jsxs)(h.Z,{className:"col-3",children:[(0,s.jsx)(x.Z,{for:"Industry",children:"Industry"}),(0,s.jsxs)(f.Z,{id:"Industry",name:"Industry",type:"select",value:C.Industry,onChange:Oe,children:[" ",(0,s.jsx)("option",{value:"",children:"--Select--"}),(0,s.jsx)("option",{children:"Financial Services"}),(0,s.jsx)("option",{children:"Airlines and Aviation"}),(0,s.jsx)("option",{children:"Banking"}),(0,s.jsx)("option",{children:"Telecommunications"}),(0,s.jsx)("option",{children:"Hospitals and Health Care"}),(0,s.jsx)("option",{children:"Museums"}),(0,s.jsx)("option",{children:"Maritime Transportation"}),(0,s.jsx)("option",{children:"Airlines and Aviation"})]})]}),(0,s.jsxs)(h.Z,{className:"col-3",children:[(0,s.jsx)(x.Z,{for:"ProductNames",children:"Product Name"}),(0,s.jsxs)(f.Z,{id:"ProductNames",className:"formaccount inputaccount",name:"ProductNames",placeholder:"ProductNames",type:"select",value:C.ProductNames,onChange:Oe,children:[(0,s.jsx)("option",{value:"",children:"--Select--"}),j.map((function(e){return(0,s.jsx)("option",{value:e.ProductName,children:e.ProductName},e.ProductID)}))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(v.Z,{type:"submit",onClick:function(e){e.preventDefault(),console.log("Search:",C),console.log("Search:",b({selectedOrganization:K,selectedContact:ne,selectedDepartment:se},C))},className:"btn btn-primary mr-2",children:"Search"}),(0,s.jsx)(v.Z,{children:"Cancel"})]})]})})]})})]}),(0,s.jsx)(l.Z,{lg:"12",style:{maxWidth:"1372px"},children:(0,s.jsx)(o.Z,{selectedOrganization:K,selectedContact:ne,selectedDepartment:se,selectedSector:C.Sector,selectedIndustry:C.Industry,selectedBusinesspartner:C.currentlyInBussiness,globalSearch:t,selectedProduct:C.ProductNames})})]})}}},function(e){e.O(0,[166,251,94,628,682,286,774,888,179],(function(){return t=854,e(e.s=t);var t}));var t=e.O();_N_E=t}]);